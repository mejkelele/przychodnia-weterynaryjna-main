// prisma/schema.prisma

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "sqlite"
  url      = env("DATABASE_URL")
}

model User {
  id        String   @id @default(uuid())
  name      String   
  lastName  String   
  email     String   @unique
  password  String   // NOWE POLE
  phone     String?
  role      String   @default("owner") // "owner" | "vet" | "admin"
  address   String?  
  
  pets      Pet[]    @relation("OwnerPets")
  vetVisits Visit[]  @relation("VetVisits")
  
  createdAt DateTime @default(now())
}

model Pet {
  id        String   @id @default(uuid())
  name      String
  species   String   // "pies" | "kot" | "inne"
  sex       String   // "male" | "female" | "unknown"
  breed     String?
  weight    Float
  birthDate DateTime
  notes     String?
  imageUrl  String?

  ownerId   String
  owner     User     @relation("OwnerPets", fields: [ownerId], references: [id])
  
  visits    Visit[]
  
  createdAt DateTime @default(now())
}

model Visit {
  id          String   @id @default(uuid())
  date        DateTime
  type        String
  status      String
  price       Float
  description String
  diagnosis   String?
  
  petId       String
  pet         Pet      @relation(fields: [petId], references: [id], onDelete: Cascade)

  vetId       String
  vet         User     @relation("VetVisits", fields: [vetId], references: [id])
  
  createdAt   DateTime @default(now())
}